{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "file-uploader-block",
  "type": "registry:block",
  "title": "File Uploader Block",
  "description": "A block for uploading multiple files with preview and progress indicators.",
  "registryDependencies": [
    "https://edgestore.dev/r/file-uploader.json"
  ],
  "files": [
    {
      "path": "examples/components/src/components/upload/blocks/multi-file-block.tsx",
      "content": "import { FileUploader } from '@/components/upload/multi-file';\nimport {\n  UploaderProvider,\n  useUploader,\n  type CompletedFileState,\n  type UploadFn,\n} from '@/components/upload/uploader-provider';\nimport { useEdgeStore } from '@/lib/edgestore';\nimport * as React from 'react';\n\nexport default function MultiImageExample() {\n  const { edgestore } = useEdgeStore();\n\n  const uploadFn: UploadFn = React.useCallback(\n    async ({ file, signal, onProgressChange }) => {\n      const res = await edgestore.myPublicFiles.upload({\n        file,\n        signal,\n        onProgressChange,\n      });\n      return { url: res.url };\n    },\n    [edgestore],\n  );\n\n  return (\n    <div className=\"flex flex-col items-center gap-4\">\n      <UploaderProvider uploadFn={uploadFn} autoUpload>\n        <FileUploader\n          maxFiles={10}\n          maxSize={1024 * 1024 * 1} // 1 MB\n        />\n      </UploaderProvider>\n      <CompletedFiles />\n    </div>\n  );\n}\n\nfunction CompletedFiles() {\n  const { fileStates } = useUploader();\n\n  const completedFiles = fileStates.filter(\n    (fs): fs is CompletedFileState => fs.status === 'COMPLETE',\n  );\n\n  if (completedFiles.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"mt-8 w-full\">\n      <h3 className=\"mb-2 text-lg font-semibold\">Uploaded Files</h3>\n      <div className=\"rounded-md bg-gray-50 p-4 dark:bg-gray-900\">\n        {completedFiles.map((res) => (\n          <a\n            key={res.url}\n            className=\"mb-1 block underline\"\n            href={res.url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {res.file.name}\n          </a>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}